(function(){!function(){var a,b,c,d,e;a=function(){},c=function(a,b){this.path=a,"undefined"!=typeof b&&null!==b?(this.at_2x_path=b,this.perform_check=!1):(this.at_2x_path=a.replace(/\.\w+$/,function(a){return"@2x"+a}),this.perform_check=!0)},b=function(a){var b;this.el=a,this.path=new c(this.el.getAttribute("src"),this.el.getAttribute("data-at2x")),b=this,this.path.check_2x_variant(function(a){a&&b.swap()})},e="undefined"==typeof exports?window:exports,d={check_mime_type:!0},e.Retina=a,a.configure=function(a){var b;null==a&&(a={});for(b in a);},a.init=function(a){var c;null==a&&(a=e),c=a.onload||new Function,a.onload=function(){var a,d,e,f;for(e=document.getElementsByTagName("img"),f=[],a=void 0,d=void 0,a=0;a<e.length;)d=e[a],f.push(new b(d)),a++;c()}},a.isRetina=function(){var a;return a="(-webkit-min-device-pixel-ratio: 1.5),                      (min--moz-device-pixel-ratio: 1.5),                      (-o-min-device-pixel-ratio: 3/2),                      (min-resolution: 1.5dppx)",e.devicePixelRatio>1?!0:e.matchMedia&&e.matchMedia(a).matches?!0:!1},e.RetinaImagePath=c,c.confirmed_paths=[],c.prototype.is_external=function(){return!(!this.path.match(/^https?\:/i)||this.path.match("//"+document.domain))},c.prototype.check_2x_variant=function(a){var b,e;b=void 0,e=this,this.is_external()?a(!1):this.perform_check||"undefined"==typeof this.at_2x_path||null===this.at_2x_path?this.at_2x_path in c.confirmed_paths?a(!0):(b=new XMLHttpRequest,b.open("HEAD",this.at_2x_path),b.onreadystatechange=function(){var f;return 4!==b.readyState?a(!1):b.status>=200&&b.status<=399?d.check_mime_type&&(f=b.getResponseHeader("Content-Type"),null==f||!f.match(/^image/i))?a(!1):(c.confirmed_paths.push(e.at_2x_path),a(!0)):a(!1)},b.send()):a(!0)},e.RetinaImage=b,b.prototype.swap=function(a){var b,c;b=function(){c.el.complete?(c.el.setAttribute("width",c.el.offsetWidth),c.el.setAttribute("height",c.el.offsetHeight),c.el.setAttribute("src",a)):setTimeout(b,5)},"undefined"==typeof a&&(a=this.path.at_2x_path),c=this,b()},a.isRetina()&&a.init(e)}()}).call(this);